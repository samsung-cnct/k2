---

- name: AWS update
  include_role:
    name: '{{ playbook_dir }}/roles/kraken.update/kraken.update.aws'
  with_items:
    - "{{ kraken_config.clusters }}"
  loop_control:
    loop_var: a_cluster
  when: a_cluster.providerConfig.provider == 'aws'

- name: GKE update
  include_role:
    name: '{{ playbook_dir }}/roles/kraken.update/kraken.update.gke'
  with_items:
    - "{{ kraken_config.clusters }}"
  loop_control:
    loop_var: a_cluster
  when: a_cluster.providerConfig.provider == 'gke'